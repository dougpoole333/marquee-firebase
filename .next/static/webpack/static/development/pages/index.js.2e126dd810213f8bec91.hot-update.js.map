{"version":3,"file":"static/webpack/static/development/pages/index.js.2e126dd810213f8bec91.hot-update.js","sources":["webpack:///./pages/installs.js","webpack:///./pages/selector.js"],"sourcesContent":["import { EmptyState, Spinner, Layout, Page, Select, Button } from '@shopify/polaris';\nimport moment from 'moment'\n\nimport \"./styles/installs.css\"\n\nclass Installs extends React.Component {\n  constructor(props){\n    super(props);\n  }\n\n  renderInstalls = () => {\n    if (this.props.installs.length > 0){\n      let arr = this.props.installs.map( (el, index) => { return(\n        <div  id={index} className=\"line\">\n          <a\n            className=\"target-link\"\n            target=\"_blank\"\n            style={{textDecoration: 'none'}}\n            href={'http://' + this.props.shopName + `.myshopify.com/admin/themes/${el.themeID}/editor`}>\n            {el.themeName}\n          </a>\n          <h1>ID: {el.themeID}</h1>\n          <div>\n            <h1>{moment(el.date).format('MMMM Do YYYY, h:mm:ss a')}</h1>\n            <h1>{moment(el.date).fromNow()}</h1>\n          </div>\n        </div>\n        )\n      })\n      return arr\n    }\n  }\n\n  render(){\n\n    return(\n      <Layout.Section>\n        {this.renderInstalls()}\n      </Layout.Section>\n    )\n  }\n\n\n\n}\n\nexport default Installs\n","import { EmptyState, Spinner, Layout, Page, Card, Select, Button } from '@shopify/polaris';\nimport Installs from './installs.js'\nimport Cookies from 'js-cookie';\n\nimport \"./styles/selector.css\"\n\nclass Selector extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      shopName: '',\n      selected: '',\n      themes: [],\n      installs: []\n    };\n  }\n\n  componentDidMount(){\n    this.getThemes();\n    this.getInstalls()\n  }\n\n  render() {\n    return (\n        <Card>\n          {this.renderSelector()}\n          {this.renderInstalls()}\n        </Card>\n    );\n  };\n\n  getThemes = async () => {\n    let urlParams = new URLSearchParams(window.location.search);\n    let shopOrigin = urlParams.get('shop');\n    let shopName = urlParams.get('shop').split(\".\")[0]\n    fetch(\"/themes/\" + shopName, { method: \"GET\"})\n    .then(response => response.json())\n    .then(json => this.setState({themes: json.data.themes, shopName: shopName, loading: false}))\n  };\n\n  getInstalls = async () => {\n      let urlParams = new URLSearchParams(window.location.search);\n      let shopOrigin = urlParams.get('shop');\n      let shopName = urlParams.get('shop').split(\".\")[0]\n      fetch(\"/\"+shopName+\"/installs\", { method: \"GET\"})\n      .then(response => response.json())\n      .then(json =>{\n          this.setState({installs: json.data})\n      })\n  }\n\n  handleChange = (newValue) => {\n    this.setState({selected: newValue});\n  };\n\n  triggerReset = () => {\n    this.setState({\n      selected: ''\n    })\n  }\n\n  renderSelector = () => {\n      return(\n        <div className=\"line\">\n          <Select\n            options = {this.state.themes ? this.state.themes.map(el => {return{label: `${el.name}`, value:`${el.id}`}}) : null}\n            onChange={this.handleChange}\n            value={this.state.selected}\n            placeholder = \"select a theme\"\n            />\n          <Button primary onClick={this.assetUpdateRequest}>Add</Button>\n        </div>\n      )\n  }\n\n  renderInstalls = () => {\n      return(\n        <Card><Installs shopName={this.state.shopName} installs={this.state.installs}/></Card>\n      )\n  }\n\n  assetUpdateRequest = async () => {\n    var fetchUrl = `${this.state.shopName}/${this.state.selected}`;\n    var method = \"PUT\";\n    fetch(fetchUrl, { method: method })\n    .then(response => response.json())\n    .then(json => {\n      if (json.status === 'success'){\n        this.setState({loading: false})\n      }\n    })\n    .then( () => {\n      this.getInstalls()\n    })\n  }\n}\n\nexport default Selector;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAKA;AACA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AAJA;AAcA;AACA;AAAA;AACA;AACA;AACA;AA1BA;AAEA;AACA;;;AAwBA;AAEA;AAKA;;;;AAnCA;AACA;AAwCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9CA;AACA;AACA;AAEA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAwBA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAzBA;AAAA;AAAA;AAAA;AAAA;AAiCA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AACA;AACA;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAlCA;AA6CA;AAAA;AAAA;AACA;AACA;AA/CA;AAiDA;AACA;AADA;AAGA;AACA;AArDA;AAuDA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAJA;AAMA;AAAA;AAAA;AAGA;AACA;AAnEA;AAqEA;AACA;AAAA;AAAA;AAEA;AACA;AAzEA;AAAA;AAAA;AAAA;AAAA;AA0EA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAzEA;AACA;AACA;AACA;AACA;AAJA;AAFA;AAQA;AACA;;;AACA;AACA;AACA;AACA;;;AAEA;AACA;AAMA;;;;AAvBA;AACA;AA0FA;;;;A","sourceRoot":""}