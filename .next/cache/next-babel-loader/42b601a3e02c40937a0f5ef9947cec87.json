{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React from \"react\";\nimport { EmptyState, Layout, Page, Select, Button } from '@shopify/polaris';\nimport Cookies from 'js-cookie';\nconst img = 'https://cdn.shopify.com/s/files/1/0757/9955/files/empty-state.svg';\n\nclass Index extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"getThemes\", async () => {\n      fetch(\"/themes\", {\n        method: \"GET\"\n      }).then(response => response.json()).then(json => this.setState({\n        themes: json.data.themes\n      }));\n    });\n\n    _defineProperty(this, \"handleChange\", newValue => {\n      this.setState({\n        selected: newValue\n      });\n    });\n\n    _defineProperty(this, \"renderRedirect\", () => {\n      if (this.state.redirect) {\n        return React.createElement(Button, {\n          target: \"_blank\",\n          url: 'http://' + Cookies.get('shopOrigin') + `/admin/themes/${this.state.selected}/editor`\n        }, \"GO TO CUSTOMIZER\");\n      }\n    });\n\n    _defineProperty(this, \"assetUpdateRequest\", async () => {\n      var fetchUrl = \"/api/\" + this.state.selected;\n      var method = \"PUT\";\n      fetch(fetchUrl, {\n        method: method\n      }).then(response => response.json()).then(json => {\n        if (json.status === 'success') {\n          this.setState({\n            redirect: true\n          });\n        }\n      });\n    });\n\n    this.state = {\n      selected: '',\n      themes: [],\n      redirect: false\n    };\n  }\n\n  componentDidMount() {\n    this.getThemes();\n  }\n\n  render() {\n    return React.createElement(Page, null, React.createElement(Layout, null, React.createElement(EmptyState, {\n      action: {\n        content: 'Add',\n        onAction: () => this.assetUpdateRequest()\n      }\n    }, React.createElement(Select, {\n      options: this.state.themes ? this.state.themes.map(el => {\n        return {\n          label: `${el.name}`,\n          value: `${el.id}`\n        };\n      }) : null,\n      onChange: this.handleChange,\n      value: this.state.selected,\n      placeholder: \"select a theme\"\n    })), this.renderRedirect()));\n  }\n\n}\n\nexport default Index;","map":{"version":3,"sources":["/Users/dpoole/DEV/marquee3/pages/index.js"],"names":["EmptyState","Layout","Page","Select","Button","Cookies","img","Index","React","Component","constructor","props","fetch","method","then","response","json","setState","themes","data","newValue","selected","state","redirect","get","fetchUrl","status","componentDidMount","getThemes","render","content","onAction","assetUpdateRequest","map","el","label","name","value","id","handleChange","renderRedirect"],"mappings":";;AAAA,SAASA,UAAT,EAAqBC,MAArB,EAA6BC,IAA7B,EAAmCC,MAAnC,EAA2CC,MAA3C,QAAyD,kBAAzD;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,MAAMC,GAAG,GAAG,mEAAZ;;AAIA,MAAMC,KAAN,SAAoBC,KAAK,CAACC,SAA1B,CAAoC;AAClCC,EAAAA,WAAW,CAACC,KAAD,EAAO;AAChB,UAAMA,KAAN;;AADgB,uCAqCN,YAAY;AACtBC,MAAAA,KAAK,CAAC,SAAD,EAAY;AAAEC,QAAAA,MAAM,EAAE;AAAV,OAAZ,CAAL,CACCC,IADD,CACMC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADlB,EAECF,IAFD,CAEME,IAAI,IAAI,KAAKC,QAAL,CAAc;AAACC,QAAAA,MAAM,EAAEF,IAAI,CAACG,IAAL,CAAUD;AAAnB,OAAd,CAFd;AAGD,KAzCiB;;AAAA,0CA2CFE,QAAD,IAAc;AAC3B,WAAKH,QAAL,CAAc;AAACI,QAAAA,QAAQ,EAAED;AAAX,OAAd;AACD,KA7CiB;;AAAA,4CA+CD,MAAM;AACrB,UAAI,KAAKE,KAAL,CAAWC,QAAf,EAAyB;AACvB,eAAO,oBAAC,MAAD;AAAQ,UAAA,MAAM,EAAC,QAAf;AAAwB,UAAA,GAAG,EAAE,YAAYlB,OAAO,CAACmB,GAAR,CAAY,YAAZ,CAAZ,GAAyC,iBAAgB,KAAKF,KAAL,CAAWD,QAAS;AAA1G,8BAAP;AACD;AACF,KAnDiB;;AAAA,gDAqDG,YAAY;AAC/B,UAAII,QAAQ,GAAG,UAAU,KAAKH,KAAL,CAAWD,QAApC;AACA,UAAIR,MAAM,GAAG,KAAb;AACAD,MAAAA,KAAK,CAACa,QAAD,EAAW;AAAEZ,QAAAA,MAAM,EAAEA;AAAV,OAAX,CAAL,CACCC,IADD,CACMC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADlB,EAECF,IAFD,CAEME,IAAI,IAAI;AACZ,YAAIA,IAAI,CAACU,MAAL,KAAgB,SAApB,EAA8B;AAC5B,eAAKT,QAAL,CAAc;AAACM,YAAAA,QAAQ,EAAE;AAAX,WAAd;AACD;AACF,OAND;AAOD,KA/DiB;;AAEhB,SAAKD,KAAL,GAAa;AACXD,MAAAA,QAAQ,EAAE,EADC;AAEXH,MAAAA,MAAM,EAAE,EAFG;AAGXK,MAAAA,QAAQ,EAAE;AAHC,KAAb;AAKD;;AAEDI,EAAAA,iBAAiB,GAAE;AACjB,SAAKC,SAAL;AACD;;AAEDC,EAAAA,MAAM,GAAG;AACP,WACE,oBAAC,IAAD,QACE,oBAAC,MAAD,QACE,oBAAC,UAAD;AACE,MAAA,MAAM,EAAE;AACNC,QAAAA,OAAO,EAAE,KADH;AAENC,QAAAA,QAAQ,EAAE,MAAM,KAAKC,kBAAL;AAFV;AADV,OAME,oBAAC,MAAD;AACE,MAAA,OAAO,EAAI,KAAKV,KAAL,CAAWJ,MAAX,GAAoB,KAAKI,KAAL,CAAWJ,MAAX,CAAkBe,GAAlB,CAAsBC,EAAE,IAAI;AAAC,eAAM;AAACC,UAAAA,KAAK,EAAG,GAAED,EAAE,CAACE,IAAK,EAAnB;AAAsBC,UAAAA,KAAK,EAAE,GAAEH,EAAE,CAACI,EAAG;AAArC,SAAN;AAA8C,OAA3E,CAApB,GAAmG,IADhH;AAEE,MAAA,QAAQ,EAAE,KAAKC,YAFjB;AAGE,MAAA,KAAK,EAAE,KAAKjB,KAAL,CAAWD,QAHpB;AAIE,MAAA,WAAW,EAAG;AAJhB,MANF,CADF,EAcG,KAAKmB,cAAL,EAdH,CADF,CADF;AAoBD;;AAnCiC;;AAmEpC,eAAejC,KAAf","sourcesContent":["import { EmptyState, Layout, Page, Select, Button } from '@shopify/polaris';\nimport Cookies from 'js-cookie';\nconst img = 'https://cdn.shopify.com/s/files/1/0757/9955/files/empty-state.svg';\n\n\n\nclass Index extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      selected: '',\n      themes: [],\n      redirect: false\n    };\n  }\n\n  componentDidMount(){\n    this.getThemes();\n  }\n\n  render() {\n    return (\n      <Page>\n        <Layout>\n          <EmptyState\n            action={{\n              content: 'Add',\n              onAction: () => this.assetUpdateRequest()\n            }}\n          >\n            <Select\n              options = {this.state.themes ? this.state.themes.map(el => {return{label: `${el.name}`, value:`${el.id}`}}) : null}\n              onChange={this.handleChange}\n              value={this.state.selected}\n              placeholder = \"select a theme\"\n               />\n          </EmptyState>\n          {this.renderRedirect()}\n        </Layout>\n      </Page>\n    );\n  };\n\n\n  getThemes = async () => {\n    fetch(\"/themes\", { method: \"GET\"})\n    .then(response => response.json())\n    .then(json => this.setState({themes: json.data.themes}))\n  };\n\n  handleChange = (newValue) => {\n    this.setState({selected: newValue});\n  };\n\n  renderRedirect = () => {\n    if (this.state.redirect) {\n      return <Button target=\"_blank\" url={'http://' + Cookies.get('shopOrigin') + `/admin/themes/${this.state.selected}/editor`}>GO TO CUSTOMIZER</Button>\n    }\n  }\n\n  assetUpdateRequest = async () => {\n    var fetchUrl = \"/api/\" + this.state.selected; \n    var method = \"PUT\";\n    fetch(fetchUrl, { method: method })\n    .then(response => response.json())\n    .then(json => {\n      if (json.status === 'success'){\n        this.setState({redirect: true})\n      }\n    })\n  }\n}\n\nexport default Index;\n"]},"metadata":{},"sourceType":"module"}