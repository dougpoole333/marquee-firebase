{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React from \"react\";\nimport { EmptyState, Layout, Page, Select, Button } from '@shopify/polaris';\nimport Cookies from 'js-cookie';\nvar img = 'https://cdn.shopify.com/s/files/1/0757/9955/files/empty-state.svg';\n\nvar Index =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Index, _React$Component);\n\n  function Index(props) {\n    var _this;\n\n    _classCallCheck(this, Index);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Index).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"getThemes\",\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              fetch(\"/themes\", {\n                method: \"GET\"\n              }).then(function (response) {\n                return response.json();\n              }).then(function (json) {\n                return _this.setState({\n                  themes: json.data.themes\n                });\n              });\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (newValue) {\n      _this.setState({\n        selected: newValue\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderRedirect\", function () {\n      if (_this.state.redirect) {\n        return React.createElement(\"a\", {\n          target: \"_blank\",\n          style: {\n            textDecoration: 'none'\n          },\n          href: 'http://' + Cookies.get('shopOrigin') + \"/admin/themes/\".concat(_this.state.selected, \"/editor\")\n        }, React.createElement(Button, {\n          primary: true\n        }, \"GO TO CUSTOMIZER\"));\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderSelector\", function () {\n      if (_this.state.selecting) {\n        return React.createElement(EmptyState, {\n          action: {\n            content: 'Add',\n            onAction: function onAction() {\n              return _this.assetUpdateRequest();\n            }\n          }\n        }, React.createElement(Select, {\n          options: _this.state.themes ? _this.state.themes.map(function (el) {\n            return {\n              label: \"\".concat(el.name),\n              value: \"\".concat(el.id)\n            };\n          }) : null,\n          onChange: _this.handleChange,\n          value: _this.state.selected,\n          placeholder: \"select a theme\"\n        }));\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"assetUpdateRequest\",\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var fetchUrl, method;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              fetchUrl = \"/api/\" + _this.state.selected;\n              method = \"PUT\";\n              fetch(fetchUrl, {\n                method: method\n              }).then(function (response) {\n                return response.json();\n              }).then(function (json) {\n                if (json.status === 'success') {\n                  _this.setState({\n                    redirect: true,\n                    selecting: false\n                  });\n                }\n              });\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    })));\n\n    _this.state = {\n      selecting: true,\n      selected: '',\n      themes: [],\n      redirect: false\n    };\n    return _this;\n  }\n\n  _createClass(Index, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getThemes();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Page, null, React.createElement(Layout, null, this.renderSelector(), this.renderRedirect()));\n    }\n  }]);\n\n  return Index;\n}(React.Component);\n\nexport default Index;","map":{"version":3,"sources":["/Users/dpoole/DEV/marquee3/pages/index.js"],"names":["EmptyState","Layout","Page","Select","Button","Cookies","img","Index","props","fetch","method","then","response","json","setState","themes","data","newValue","selected","state","redirect","textDecoration","get","selecting","content","onAction","assetUpdateRequest","map","el","label","name","value","id","handleChange","fetchUrl","status","getThemes","renderSelector","renderRedirect","React","Component"],"mappings":"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","sourcesContent":["import { EmptyState, Layout, Page, Select, Button } from '@shopify/polaris';\nimport Cookies from 'js-cookie';\nconst img = 'https://cdn.shopify.com/s/files/1/0757/9955/files/empty-state.svg';\n\n\n\nclass Index extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      selecting: true,\n      selected: '',\n      themes: [],\n      redirect: false\n    };\n  }\n\n  componentDidMount(){\n    this.getThemes();\n  }\n\n  render() {\n    return (\n      <Page>\n        <Layout>\n          {this.renderSelector()}\n          {this.renderRedirect()}\n          \n        </Layout>\n      </Page>\n    );\n  };\n\n\n  getThemes = async () => {\n    fetch(\"/themes\", { method: \"GET\"})\n    .then(response => response.json())\n    .then(json => this.setState({themes: json.data.themes}))\n  };\n\n  handleChange = (newValue) => {\n    this.setState({selected: newValue});\n  };\n\n  renderRedirect = () => {\n    if (this.state.redirect) {\n      return (\n        <a\n          target=\"_blank\"\n          style={{textDecoration: 'none'}}\n          href={'http://' + Cookies.get('shopOrigin') + `/admin/themes/${this.state.selected}/editor`}>\n            <Button primary>GO TO CUSTOMIZER</Button>\n        </a>)\n    }\n  }\n\n  renderSelector = () => {\n    if (this.state.selecting){\n      return(\n        <EmptyState\n        action={{\n          content: 'Add',\n          onAction: () => this.assetUpdateRequest()\n        }}\n      >\n        <Select\n          options = {this.state.themes ? this.state.themes.map(el => {return{label: `${el.name}`, value:`${el.id}`}}) : null}\n          onChange={this.handleChange}\n          value={this.state.selected}\n          placeholder = \"select a theme\"\n           />\n        </EmptyState>\n      )\n    }\n  }\n\n  assetUpdateRequest = async () => {\n    var fetchUrl = \"/api/\" + this.state.selected; \n    var method = \"PUT\";\n    fetch(fetchUrl, { method: method })\n    .then(response => response.json())\n    .then(json => {\n      if (json.status === 'success'){\n        this.setState({redirect: true, selecting: false})\n      }\n    })\n  }\n}\n\nexport default Index;\n"]},"metadata":{},"sourceType":"module"}