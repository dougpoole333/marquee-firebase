{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React from \"react\";\nimport { EmptyState, Spinner, Layout, Page, Select, Button } from '@shopify/polaris';\n\nvar Installs =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Installs, _React$Component);\n\n  function Installs(props) {\n    var _this;\n\n    _classCallCheck(this, Installs);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Installs).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"getInstalls\",\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var urlParams, shopOrigin, shopName;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              urlParams = new URLSearchParams(window.location.search);\n              shopOrigin = urlParams.get('shop');\n              shopName = urlParams.get('shop').split(\".\")[0];\n              fetch(\"/\" + shopName + \"/installs\", {\n                method: \"GET\"\n              }).then(function (response) {\n                return response.json();\n              }).then(function (json) {\n                _this.setState({\n                  installs: json.data\n                });\n              });\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"renderInstalls\", function () {\n      if (_this.state.installs.length > 0) {\n        var arr = _this.state.installs.map(function (el, index) {\n          return React.createElement(\"h1\", {\n            id: index\n          }, el.themeName, \", \", el.themeID, \", \", el.date);\n        });\n\n        return arr;\n      }\n    });\n\n    _this.state = {\n      installs: []\n    };\n    return _this;\n  }\n\n  _createClass(Installs, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getInstalls();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Layout.Section, null, this.state.installs.length > 0 ? this.renderInstalls() : React.createElement(Spinner, null));\n    }\n  }]);\n\n  return Installs;\n}(React.Component);\n\nexport default Installs;","map":{"version":3,"sources":["/Users/dpoole/DEV/marquee-firebase/pages/installs.js"],"names":["EmptyState","Spinner","Layout","Page","Select","Button","Installs","props","urlParams","URLSearchParams","window","location","search","shopOrigin","get","shopName","split","fetch","method","then","response","json","setState","installs","data","state","length","arr","map","el","index","themeName","themeID","date","getInstalls","renderInstalls","React","Component"],"mappings":";;;;;;;;;;AAAA,SAASA,UAAT,EAAqBC,OAArB,EAA8BC,MAA9B,EAAsCC,IAAtC,EAA4CC,MAA5C,EAAoDC,MAApD,QAAkE,kBAAlE;;IAEMC,Q;;;;;AACJ,oBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AAChB,kFAAMA,KAAN;;AADgB;AAAA;AAAA;AAAA;AAAA,6BAWJ;AAAA;AAAA;AAAA;AAAA;AAAA;AACNC,cAAAA,SADM,GACM,IAAIC,eAAJ,CAAoBC,MAAM,CAACC,QAAP,CAAgBC,MAApC,CADN;AAENC,cAAAA,UAFM,GAEOL,SAAS,CAACM,GAAV,CAAc,MAAd,CAFP;AAGNC,cAAAA,QAHM,GAGKP,SAAS,CAACM,GAAV,CAAc,MAAd,EAAsBE,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,CAHL;AAIVC,cAAAA,KAAK,CAAC,MAAIF,QAAJ,GAAa,WAAd,EAA2B;AAAEG,gBAAAA,MAAM,EAAE;AAAV,eAA3B,CAAL,CACCC,IADD,CACM,UAAAC,QAAQ;AAAA,uBAAIA,QAAQ,CAACC,IAAT,EAAJ;AAAA,eADd,EAECF,IAFD,CAEM,UAAAE,IAAI,EAAG;AACT,sBAAKC,QAAL,CAAc;AAACC,kBAAAA,QAAQ,EAAEF,IAAI,CAACG;AAAhB,iBAAd;AACH,eAJD;;AAJU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAXI;;AAAA,qEAsBD,YAAM;AACrB,UAAI,MAAKC,KAAL,CAAWF,QAAX,CAAoBG,MAApB,GAA6B,CAAjC,EAAmC;AACjC,YAAIC,GAAG,GAAG,MAAKF,KAAL,CAAWF,QAAX,CAAoBK,GAApB,CAAyB,UAACC,EAAD,EAAKC,KAAL,EAAe;AAAE,iBAChD;AAAI,YAAA,EAAE,EAAEA;AAAR,aAAgBD,EAAE,CAACE,SAAnB,QAAgCF,EAAE,CAACG,OAAnC,QAA8CH,EAAE,CAACI,IAAjD,CADgD;AAGnD,SAHS,CAAV;;AAIA,eAAON,GAAP;AACD;AACF,KA9BiB;;AAEhB,UAAKF,KAAL,GAAa;AACXF,MAAAA,QAAQ,EAAE;AADC,KAAb;AAFgB;AAKjB;;;;wCAEkB;AACjB,WAAKW,WAAL;AACD;;;6BAuBO;AAEN,aACE,oBAAC,MAAD,CAAQ,OAAR,QACG,KAAKT,KAAL,CAAWF,QAAX,CAAoBG,MAApB,GAA6B,CAA7B,GAAiC,KAAKS,cAAL,EAAjC,GAAyD,oBAAC,OAAD,OAD5D,CADF;AAKD;;;;EAxCoBC,KAAK,CAACC,S;;AA8C7B,eAAe/B,QAAf","sourcesContent":["import { EmptyState, Spinner, Layout, Page, Select, Button } from '@shopify/polaris';\n\nclass Installs extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      installs: []\n    };\n  }\n\n  componentDidMount(){\n    this.getInstalls()\n  }\n\n  getInstalls = async () => {\n      let urlParams = new URLSearchParams(window.location.search);\n      let shopOrigin = urlParams.get('shop');\n      let shopName = urlParams.get('shop').split(\".\")[0]\n      fetch(\"/\"+shopName+\"/installs\", { method: \"GET\"})\n      .then(response => response.json())\n      .then(json =>{\n          this.setState({installs: json.data})\n      })\n  }\n\n  renderInstalls = () => {\n    if (this.state.installs.length > 0){\n      let arr = this.state.installs.map( (el, index) => { return(\n          <h1 id={index}>{el.themeName}, {el.themeID}, {el.date}</h1>\n        )\n      })\n      return arr\n    }\n  }\n\n  render(){\n\n    return(\n      <Layout.Section>\n        {this.state.installs.length > 0 ? this.renderInstalls() : <Spinner/>}\n      </Layout.Section>\n    )\n  }\n\n\n\n}\n\nexport default Installs\n"]},"metadata":{},"sourceType":"module"}